(c=>{window.App=window.App||{},App.isScrollTopBody=!0,App.winLocHash=window.location.hash,App.$body=c("body"),App.$htmlBody=c("html, body"),App.$modelsMenu=c(".slider-menu .models-menu"),App.$$modelsMenuMobile=c(".slider-menu .models-menu.mobile"),App.$currentProduct=null,App.$nextProduct=null,App.$thankPage="/thank-page.html",App.$validActions=["call","order_products_one_click"],App.scrollTopBody=function(e,t=54,o=600){(e="string"==typeof e?c(e):e).length&&App.$htmlBody.animate({scrollTop:e.offset().top-t},o)},App.initFileUpload=function(e,t,a,s=20){c(e).on("click",function(){c(t).trigger("click")}),c(t).on("change",function(){let e=this.files[0]?.name||"Файл не обрано";var t,o,i;e.length>s&&(t=-1!==(t=e.lastIndexOf("."))?e.slice(t):"",0<(i=s-t.length-3))&&(o=e.slice(0,Math.ceil(i/2)),i=e.slice(-Math.floor(i/2)),e=o+"..."+i+t),c(a).text(e)})},App.lazyLoadImages=function(){c("img[data-src]").each(function(){var e,t,o=c(this);o.isInViewportImg()&&!o.data("loaded")&&(e=o.attr("data-src"),t=o.attr("data-srcset"),e&&o.attr("src",e),t&&o.attr("srcset",t),o.data("loaded",!0),o.hide().fadeIn(400))})},App.isMobileDevice=function(e=768){return window.innerWidth<e},App.headerMobileClick=function(e,t=48){c(e).on("click touch",function(e){e.preventDefault(),App.$nextProduct?App.scrollTopBody(App.$nextProduct,t):App.scrollTopBody(c(".products-mobile__item").first(),t)})},App.escapeHTML=function(e){return e.replace(/[&<>"']/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]})},c.fn.isInViewportImg=function(){var e=c(this).offset().top,t=e+c(this).outerHeight(),o=c(window).scrollTop(),i=o+c(window).height();return o<t&&e<i},c(window).on("load scroll resize",App.lazyLoadImages),c.fn.percentOfViewport=function(){var e=c(window).height(),t=c(this).offset().top,o=t+c(this).height(),i=c(window).scrollTop(),a=i+e;return{ELtop_to_VPtop:(t-i)/e*100,ELbottom_to_VPtop:(o-i)/e*100,ELtop_to_VPbottom:(a-t)/e*100,ELbottom_to_VPbottom:(a-o)/e*100,viewportHeight:e}},c.fn.isInViewport=function(){var e=c(this).percentOfViewport();return e.ELtop_to_VPtop<100&&0<e.ELbottom_to_VPtop},c(".sandwich").on("click touch",function(){c(this).toggleClass("active"),c(".header__navigation").slideToggle();var e=c(".header__wrapper--navigation");"40px"===e.css("padding-bottom")?e.removeAttr("style"):e.css({"padding-bottom":"40px"})}),App.$body.on("click touch",".open-dialog, .open-popup, .open-form, .open-modal",function(e){e.preventDefault();var e=c(this).attr("href"),t=c(".dialogs");let o=t.find(e);var i=t.find(".flex-popup"),a=e.slice(1);return"policy"!==a&&localStorage.setItem("popup",a),t.find(".popup").removeClass("active").hide(),o.length?(t.find(".popup").removeClass("active").hide(),o.show(),t.show(),i.addClass("popup--"+a),t.animate({opacity:1},300,()=>{o.addClass("active"),App.$body.css({"overflow-y":"hidden"})}),"gallery"===a&&(t=c(this).attr("data-product"),i.find(".popup__content .popup-gallery").hide(),i.find(`.popup__content .popup-gallery[data-gallery="product-${t}"]`).show(),a=t,i=new Swiper(`.popup-gallery[data-gallery="product-${a}"] > .popup-gallery__preview`,{slidesPerView:"auto",spaceBetween:8,threshold:8,breakpoints:{320:{direction:"horizontal",slidesOffsetBefore:20,slidesOffsetAfter:20},480:{direction:"horizontal",slidesOffsetBefore:20,slidesOffsetAfter:20},640:{direction:"vertical"}}}),new Swiper(`.popup-gallery[data-gallery="product-${a}"] > .popup-gallery__media`,{spaceBetween:0,thumbs:{swiper:i}})),l(".swiper-slide")):console.log(`Попап с ID ${e} не найден.`),!1}),c(".dialogs").on("click touch",".close, .close-bg",function(){let e=c(".dialogs"),t=e.find(".flex-popup");var o,i=e.find(".popup.active").attr("id");let a=()=>{App.$body.css({"overflow-y":"auto"})},s=()=>{t.removeClass(function(e,t){return(t.match(/popup--\S+/g)||[]).join(" ")})},n=t.find(".popup.active");"cart"===i?n.animate({right:"-100%",opacity:0},600,function(){e.animate({opacity:0},300,function(){e.find(".popup").removeClass("active").hide(),n.removeAttr("style"),e.hide(),e.find(".thanks-popup").hide(),s()}),a()}):"policy"===i?(n.removeClass("active").hide(),i=localStorage.getItem("popup"),(o=c(".dialogs #"+i)).length?(o.addClass("active").show(),e.show()):console.log("Попап с ID "+i+" не найден.")):(n.removeClass("active").hide(),e.animate({opacity:0},300,function(){e.hide(),e.find(".thanks-popup").hide(),s(),a()})),l(".swiper-slide")}),c(document).on("keyup",function(e){"Escape"!==e.key&&27!==e.keyCode||(c(".dialogs .popup.active .close").trigger("click touch"),l(".swiper-slide"))});let o=".dropdown";function l(e){c(e).find("video").each(function(){this.pause()})}function d(e,t,o,i){let a=c(e),s=c(i),n=0,l=!1,r=!1;c("#wpadminbar").length&&(t-=32),c(window).on("scroll",function(){let e=c(window).scrollTop();l||(requestAnimationFrame(()=>{e>n&&e>=t?r||(!s.length&&c("#wpadminbar").length?a.addClass(o).css({top:"32px"}):a.addClass(o).css({top:`-${t}px`}),s.css({top:`-${t}px`}),r=!0):e<n&&(a.removeClass(o).css({top:0}),s.css({top:0}),r=!1),n=e,l=!1}),l=!0)})}c(o).on("click touch",o+"__item",function(e){c(this).toggleClass("active").trigger("filtered"),e.stopPropagation()}),c(o).on("filtered",o+"__item",function(){var e=c(this).closest(o),t=c(".filtered-list");let i=e.find(o+"__item.active").map(function(){return c(this).data("filter")}).get();e=t.find(".reviews__item");if(e.hide().removeClass("left right"),0<i.length){let o=[],t=(e.each(function(){var e=c(this);let t=e.data("filter").split(" ");i.some(e=>t.includes(e))&&o.push(e)}),0);o.forEach(e=>{e.show().addClass(t%2==0?"left":"right"),t++})}else e.show();e=t.find(".reviews__item:visible");e.removeClass("margin-top-reset"),e.each(function(e){e<=0&&c(this).addClass("margin-top-reset")})}),c(window).on("load scroll",function(){c(".js-wait-animation").each(function(){c(this).isInViewport()?(c(this).addClass("animate").removeClass("out-of-viewport"),c(this).hasClass("advantages")&&!c(this).data("numbers-animated")&&(c(this).data("numbers-animated",!0),c(".counts h3").each(function(){let e=c(this),t=parseInt(e.text().replace(/\D/g,"")),o=e.find("span").html()||"";isNaN(t)||e.data("animated")||(e.data("animated",!0),c({countNum:0}).animate({countNum:t},{duration:1500,easing:"swing",step:function(){e.html(Math.floor(this.countNum)+"<span>"+o+"</span>")},complete:function(){e.html(t+"<span>"+o+"</span>")}}))}))):c(this).addClass("out-of-viewport")})}),c(window).on("load",function(){{var e=[".dropdown-language",".dropdown-filter",".dropdown-category",".dropdown-sort"];let t=e.join(",");c(document).on("click touch",t,function(e){var t=c(this).next(o);if(!t.hasClass("active"))return c(o).removeClass("active"),t.addClass("active"),c(this).addClass("active"),e.stopPropagation(),!1;t.removeClass("active"),c(this).removeClass("active")}),c(document).on("click touch",function(e){c(e.target).closest(o).length||(c(o).removeClass("active"),c(t).removeClass("active"))})}{let o=c(e=".catalog-view a");o.on("click touch",function(e){e.preventDefault();var e=c(this).data("view"),t=(o.removeClass("active"),c(this).addClass("active"),c(".view__wrapper"));t.removeClass(function(e,t){return(t.match(/view__wrapper--\S+/g)||[]).join(" ")}),e&&"default"!==e&&t.addClass("view__wrapper--"+e)})}}),c(window).on("load scroll resize",function(){var e=c(".header__wrapper"),t=c(".header__wrapper > .header__item"),o=t.first().outerWidth(!0),i=t.last().outerWidth(!0),o=e.width()-(o+i+(parseFloat(e.css("gap"))||0)*(t.length-1));c(".header-menu").css("width",o+"px")}),c(window).on("load",()=>{setTimeout(()=>{var o="body > .footer",i="body > .main",a="body > .top-panel, body > .header";if(o=c(o),i=c(i),0!==o.length&&0!==i.length){o=o.outerHeight(!0)||0;let e=0;c(a).each(function(){e+=c(this).outerHeight(!0)||0});a=o+e;let t=window.innerHeight-a;t<0&&(t=0),i.css("min-height",t+"px")}},50)}),c(function(){{var t=".fix-sticky",o=".top-panel",i=".top-panel";let e=0;c(o).each(function(){e+=c(this).outerHeight(!0)||0}),d(t,e,"sticky",i)}c(".mask-phone").each(function(){let e=this,t=IMask(e,{mask:"+{7} (000) 000-00-00"});c(e).on("focus",function(){t.updateOptions({lazy:!1})}),c(e).on("blur",function(){"+7 (___) ___-__-__"===e.value&&t.updateOptions({lazy:!0})})}),c(".video-block__source").each(function(){{var o=this;let e=(o=c(o)).find("video"),t=(o=o.find(".video-block__button--mp4")).find(".ico-video-button > use");o.on("click touch",function(){c(".video-block__source video").each(function(){this!==e[0]&&(this.pause(),c(this).closest(".video-block__source").find(".ico-video-button > use").attr("href","assets/img/sprite.svg#ico-play"))}),e[0].paused?(e[0].play(),e.hasClass("cover")&&e.css("object-fit","cover"),t.attr("href","assets/img/sprite.svg#ico-pause")):(e[0].pause(),t.attr("href","assets/img/sprite.svg#ico-play"))})}});{var a=App.$modelsMenu;let t=a.find("a");function s(e){var t=a.outerWidth(),o=a.scrollLeft(),i=e.offset().left-a.offset().left,e=e.outerWidth();a.animate({scrollLeft:o+i-t/2+e/2},300)}t.on("click touch",function(){var e=c(this);t.removeClass("active"),e.addClass("active"),s(e)}),(o=t).length&&s(o)}var n,l,e;n=".description",l=".accordion-item",c(".accordion-open").on("click touch",function(e){e.preventDefault();var e=c(this).closest(l),t=e.find(n);e.hasClass("active")?(e.removeClass("active"),t.stop(!0,!0).slideUp()):(e.siblings().removeClass("active").find(n).slideUp(),e.addClass("active"),t.stop(!0,!0).slideDown())}),t=".for-slider",document.querySelectorAll(t).forEach(t=>{var o=t.querySelector(".for-slider-lead > .swiper-container"),i=t.querySelector(".for-slider-slave > .swiper-container"),a=t.querySelector(".for-slider-nav");if(o){let e=new Swiper(o,{watchOverflow:!0,loopedSlides:parseInt(o.dataset.loopedslides)||2,slidesPerGroup:parseInt(o.dataset.slidespergroup)||1,loop:"true"===o.dataset.loop||!1,autoplay:0<o.dataset.autoplay&&{delay:o.dataset.autoplay,disableOnInteraction:!1},speed:parseInt(o.dataset.speed)||600,slidesPerView:o.dataset.slidesperview||"auto",autoHeight:"true"===o.dataset.autoheight||!1,spaceBetween:parseInt(o.dataset.spacebetween)||0,centeredSlides:"true"===o.dataset.centeredslides||!1,slideToClickedSlide:"true"===o.dataset.slidetoclickedslide||!0});i&&(o=new Swiper(i,{watchOverflow:!0,loopedSlides:parseInt(i.dataset.loopedslides)||2,slidesPerGroup:parseInt(i.dataset.slidespergroup)||1,loop:"true"===i.dataset.loop||!1,spaceBetween:parseInt(i.dataset.spacebetween)||0,effect:i.dataset.effect||!1,speed:parseInt(i.dataset.speed)||600,fadeEffect:{crossFade:!0},navigation:{nextEl:a.querySelector(".next"),prevEl:a.querySelector(".prev")}}),e)&&o&&((e.controller.control=o).controller.control=e),t.addEventListener("mouseenter",()=>{e.params.autoplay.enabled&&e.autoplay.stop()}),t.addEventListener("mouseleave",()=>{e.params.autoplay.enabled&&e.autoplay.start()})}});{var r=".menu-user__search",p=".header-search";let t=c(".header__wrapper > .header__item > .custom-logo-link > img");c(r).on("click touch",function(e){e.preventDefault(),t.css({height:"53px",borderRadius:"16px 0 0 16px"}),c(p).addClass("active"),setTimeout(()=>{c(p+"__input").trigger("focus")},50)}),c(p+"__close").on("click touch",function(){c(p+"__input").val("").trigger("focus")}),c(document).on("click touch keyup",function(e){c(e.target).closest(r+", "+p).length&&"Escape"!==e.key&&27!==e.keyCode||(t.removeAttr("style"),c(p).removeClass("active"))})}i=".dialogs",(e="img")!==e&&"video"!==e?console.log('Invalid mediaType. Use "img" or "video".'):c(i).find(e).each(function(){"img"===e?(new Image).src=c(this).attr("src"):"video"===e&&this.load()}),0<App.$modelsMenu.length&&App.$modelsMenu.find("a.active").attr("href")===App.winLocHash&&(App.isMobileDevice()?App.scrollTopBody(App.$$modelsMenuMobile):App.scrollTopBody(App.$modelsMenu))})})(jQuery);

